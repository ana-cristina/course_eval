!function(n){n.fn.cardtable=function(t){var a=this,d={id:"stacktable small-only",hideOriginal:!0,headIndex:0},s=n.extend({},d,t);return t&&t.headIndex?headIndex=t.headIndex:headIndex=0,a.each(function(){if($table=n(this),!$table.hasClass("stacktable")){var d=n(this).prop("class"),t=n("<div></div>");"undefined"!=typeof s.myClass&&t.addClass(s.myClass);var e="";$table.addClass("stacktable large-only"),$caption=$table.find("caption").clone(),$topRow=$table.find("tr").eq(0),$table.find("tbody tr").each(function(){headMarkup="",bodyMarkup="",tr_class=n(this).prop("class"),n(this).find("td,th").each(function(t){""!==n(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',$topRow.find("td,th").eq(t).html()?bodyMarkup+='<td class="st-key">'+$table.find("thead th").eq(t).html()+"</td>":bodyMarkup+='<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+n(this).prop("class")+'">'+n(this).html()+"</td>",bodyMarkup+="</tr>")}),e+='<table class=" '+d+" "+s.id+'"><tbody>'+headMarkup+bodyMarkup+"</tbody></table>"}),$table.find("tfoot tr td").each(function(t,a){""!==n.trim(n(a).text())&&(e+='<table class="'+d+" "+s.id+'"><tbody><tr><td>'+n(a).html()+"</td></tr></tbody></table>")}),t.prepend($caption),t.append(n(e)),$table.before(t),s.hideOriginal||$table.show()}})},n.fn.stacktable=function(t){var a=this,d={id:"stacktable small-only",hideOriginal:!0,headIndex:0},e=n.extend({},d,t);return t&&t.headIndex?headIndex=t.headIndex:headIndex=0,a.each(function(){var t=n(this).prop("class"),a=n('<table class="'+t+" "+e.id+'"><tbody></tbody></table>');"undefined"!=typeof e.myClass&&a.addClass(e.myClass);var d="";$table=n(this),$table.addClass("stacktable large-only"),$caption=$table.find("caption").clone(),$topRow=$table.find("tr").eq(0),$table.find("tr").each(function(t){headMarkup="",bodyMarkup="",tr_class=n(this).prop("class"),0===t?d+='<tr class=" '+tr_class+' "><th class="st-head-row st-head-row-main" colspan="2">'+n(this).find("th,td").eq(headIndex).html()+"</th></tr>":(n(this).find("td,th").each(function(t){t===headIndex?headMarkup='<tr class="'+tr_class+'"><th class="st-head-row" colspan="2">'+n(this).html()+"</th></tr>":""!==n(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',$topRow.find("td,th").eq(t).html()?bodyMarkup+='<td class="st-key">'+$topRow.find("td,th").eq(t).html()+"</td>":bodyMarkup+='<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+n(this).prop("class")+'">'+n(this).html()+"</td>",bodyMarkup+="</tr>")}),d+=headMarkup+bodyMarkup)}),a.prepend($caption),a.append(n(d)),$table.before(a),e.hideOriginal||$table.show()})},n.fn.stackcolumns=function(t){var a=this,d={id:"stacktable small-only",hideOriginal:!0},e=n.extend({},d,t);return a.each(function(){$table=n(this);var t=$table.find("tr").eq(0).find("td,th").length;if(!(t<3)){var a=n('<table class="'+e.id+'"></table>');"undefined"!=typeof e.myClass&&a.addClass(e.myClass),$table.addClass("stacktable large-only");for(var s=n("<tbody></tbody>"),l=1;l<t;)$table.find("tr").each(function(t){var a=n("<tr></tr>");0===t&&a.addClass("st-head-row st-head-row-main"),first=n(this).find("td,th").eq(0).clone().addClass("st-key");var d=l;if(n(this).find("*[colspan]").length){var e=0;n(this).find("td,th").each(function(){var t=n(this).attr("colspan");if(t?(t=parseInt(t,10),d-=t-1,l<e+t&&(d+=e+t-l-1),e+=t):e++,l<e)return!1})}second=n(this).find("td,th").eq(d).clone().addClass("st-val").removeAttr("colspan"),a.append(first,second),s.append(a)}),++l;a.append(n(s)),$table.before(a),e.hideOriginal||$table.show()}})}}(jQuery);