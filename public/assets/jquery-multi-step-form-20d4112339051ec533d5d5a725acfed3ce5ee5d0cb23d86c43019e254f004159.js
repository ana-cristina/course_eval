!function(s){var r=s.multistepform=function(){r.init.apply(this,arguments)};s.extend(r,{current_fs:!1,next_fs:!1,previous_fs:!1,animating:!1,defaults:{container:"",duration:800,form_url:"",form_method:"POST",onClose:function(){}},init:function(t){if(r.opts=s.extend(!0,{},r.defaults,t),r.opts.form_url){var n=s('<div id="'+r.opts.container+'" class="multistepform" style="display:none; position: absolute; top:0; width: 100%; height: 100%; z-index: 9999;"></div>');s("body").append(n),n.html('<div id="multistepform"><div class="bg"></div><div id="multistepform-container"></div></div>'),s.get(r.opts.form_url,function(t){s("#multistepform-container").html(t),r._show()})}else{var e=(n=s("#"+r.opts.container).addClass("multistepform").css({display:"none",position:"absolute",top:0,width:"100%",height:"100%","z-index":9999})).html();n.html('<div id="multistepform"><div class="bg"></div><div class="close"></div><div id="multistepform-container">'+e+"</div></div>"),r._show()}},_show:function(){r.current_fs=s(s("#"+r.opts.container).find(".form")[0]),s("#"+r.opts.container+" .next").click(r.next),s("#"+r.opts.container+" .previous").click(r.prev),s("#"+r.opts.container).show(),s("body").css({overflow:"hidden"})},_next:function(){r.next_fs=r.current_fs.next(),console.log(s(s("#"+r.opts.container).find(".form")[0])),console.log(s(s("#"+r.opts.container).find(".form")[0].next)),s("#multistepform-progressbar li").eq(s(".form").index(r.next_fs)).addClass("active"),r.next_fs.show(),r.current_fs.animate({opacity:0},{step:function(t){scale=1-.2*(1-t),left=50*t+"%",opacity=1-t,r.current_fs.css({transform:"scale("+scale+")"}),r.next_fs.css({left:left,opacity:opacity})},duration:r.opts.duration,complete:function(){r.next_fs[0]||r._close(),r.current_fs.hide(),r.current_fs=r.next_fs,r.animating=!1;for(var t=r.current_fs.find("form"),n=0;n<t.length;n++)!function(o){s(o).find(".submit").click(function(t){var n=o,e=s(n).serialize(),i=s(n).attr("action");s.ajax({type:r.opts.container,url:i,data:e}),t.preventDefault()})}(t[n])},easing:"easeInOutBack"})},_close:function(){s("#"+r.opts.container).hide(),s("body").css({overflow:"auto"})},close:function(){r.opts.onClose(),r._close()},next:function(){if(r.animating)return!1;r.animating=!0;var t=s(r.current_fs).children("form");if(t.length){var n=s(t[0]).serialize();s.ajax({type:r.opts.form_method,url:s(t[0]).attr("action"),data:n,success:function(){r._next()}})}else r._next()},prev:function(){if(r.animating)return!1;r.animating=!0,r.previous_fs=r.current_fs.prev(),s("#multistepform-progressbar li").eq(s(".form").index(r.current_fs)).removeClass("active"),r.previous_fs.show(),r.current_fs.animate({opacity:0},{step:function(t){scale=.8+.2*(1-t),left=50*(1-t)+"%",opacity=1-t,r.current_fs.css({left:left}),r.previous_fs.css({transform:"scale("+scale+")",opacity:opacity})},duration:r.opts.duration,complete:function(){r.current_fs.hide(),r.current_fs=r.previous_fs,r.animating=!1},easing:"easeInOutBack"})}})}(jQuery);