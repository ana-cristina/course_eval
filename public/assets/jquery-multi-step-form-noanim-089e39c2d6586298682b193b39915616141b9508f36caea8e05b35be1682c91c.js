!function(o){var r=o.multistepform=function(){r.init.apply(this,arguments)};o.extend(r,{current_fs:!1,next_fs:!1,previous_fs:!1,animating:!1,defaults:{container:"",duration:1e3,form_url:"",form_method:"POST",onClose:function(){}},init:function(t){if(r.opts=o.extend(!0,{},r.defaults,t),r.opts.form_url){var e=o('<div id="'+r.opts.container+'" class="multistepform" style="display:none; position: absolute; top:0; width: 100%; height: 100%; z-index: 9999;"></div>');o("body").append(e),e.html('<div id="multistepform"><div class="bg"></div><div id="multistepform-container"></div></div>'),o.get(r.opts.form_url,function(t){o("#multistepform-container").html(t),r._show()})}else{var i=(e=o("#"+r.opts.container).addClass("multistepform").css({display:"none",position:"absolute",top:0,width:"100%",height:"100%","z-index":9999})).html();e.html('<div id="multistepform"><div class="bg"></div><div class="close"></div><div id="multistepform-container">'+i+"</div></div>"),r._show()}},_show:function(){r.current_fs=o(o("#"+r.opts.container).find(".form")[0]),o("#"+r.opts.container+" .next").click(r.next),o("#"+r.opts.container+" .previous").click(r.prev),o("#"+r.opts.container).show(),o("body").css({overflow:"hidden"})},_next:function(){r.next_fs=r.current_fs.next(),o("#multistepform-progressbar li").eq(o(".form").index(r.next_fs)).addClass("active"),r.next_fs.show(),r.current_fs.animate({opacity:0},{step:function(){scale=1,left=1,opacity=1,r.current_fs.css({transform:"scale("+scale+")"}),r.next_fs.css({left:left,opacity:opacity})},duration:r.opts.duration,complete:function(){r.next_fs[0]||r._close(),r.current_fs.hide(),r.current_fs=r.next_fs,r.animating=!1;for(var t=r.current_fs.find("form"),e=0;e<t.length;e++)!function(s){o(s).find(".submit").click(function(t){var e=s,i=o(e).serialize(),n=o(e).attr("action");o.ajax({type:r.opts.container,url:n,data:i}),t.preventDefault()})}(t[e])}})},_close:function(){o("#"+r.opts.container).hide(),o("body").css({overflow:"auto"})},close:function(){r.opts.onClose(),r._close()},next:function(){if(r.animating)return!1;r.animating=!0;var t=o(r.current_fs).children("form");if(t.length){var e=o(t[0]).serialize();o.ajax({type:r.opts.form_method,url:o(t[0]).attr("action"),data:e,success:function(){r._next()}})}else r._next()},prev:function(){if(r.animating)return!1;r.animating=!0,r.previous_fs=r.current_fs.prev(),o("#multistepform-progressbar li").eq(o(".form").index(r.current_fs)).removeClass("active"),r.previous_fs.show(),r.current_fs.animate({opacity:0},{step:function(t){scale=1,left=1,opacity=1-t,r.current_fs.css({left:left}),r.previous_fs.css({transform:"scale("+scale+")",opacity:opacity})},duration:r.opts.duration,complete:function(){r.current_fs.hide(),r.current_fs=r.previous_fs,r.animating=!1}})}})}(jQuery);